/* style.css 전체 내용 - 오버레이 z-index 수정, 모달 애니메이션 복구 */

body { font-family: "Nanum Gothic", sans-serif; background-color: #1E1E1E; color: #e0e0e0; margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; font-size: 0.95rem; }
.app-container { display: flex; flex-direction: column; height: 100%; width: 95%; max-width: 880px; margin: 0 auto; background-color: #1e1e1f; box-shadow: none; border: none; position: relative; overflow: hidden; padding-bottom: 15px; }
@media (min-width: 1200px) { .app-container { width: 58%; } }
.chat-header { background-color: #1e1e1e; color: #ffffff; padding: 0.8rem; text-align: center; font-size: 1.1rem; font-weight: bold; flex-shrink: 0; position: relative; display: flex; justify-content: center; align-items: center; border-bottom: 1px solid #2f2f2f; }
#sidebarToggle { position: absolute; top: 50%; right: 1rem; transform: translateY(-50%); width: 30px; height: 30px; background-color: #5a5a5a; color: #ffffff; border: none; border-radius: 50%; cursor: pointer; font-size: 1rem; display: flex; justify-content: center; align-items: center; transition: background-color 0.2s ease; z-index: 10; }
#sidebarToggle:hover { background-color: #6a6a6a; }
#chat { flex: 1; padding: 0.8rem; overflow-y: auto; display: flex; flex-direction: column; gap: 1rem; background-color: #1e1e1e; scrollbar-width: none; -ms-overflow-style: none; }
#chat::-webkit-scrollbar { display: none; }
.message-container { display: flex; flex-direction: column; max-width: 85%; gap: 0.3rem; }
.message-container.user { align-items: flex-end; margin-left: auto; }
.message-container.bot { align-items: flex-start; margin-right: auto; }
.profile-area { display: flex; align-items: center; gap: 0.6rem; order: 1; }
.message-container.user .profile-area { flex-direction: row-reverse; }
.profile-img { width: 30px; height: 30px; border-radius: 50%; object-fit: cover; border: 1px solid #5a5a5a; flex-shrink: 0; cursor: pointer; position: relative; }
.profile-emoji { position: absolute; bottom: -5px; right: -5px; font-size: 0.7rem; background-color: rgba(30, 30, 30, 0.7); border-radius: 50%; padding: 1px; line-height: 1; display: none; }
.profile-fallback { width: 30px; height: 30px; border-radius: 50%; background-color: #4a4a4a; border: 1px solid #5a5a5a; flex-shrink: 0; display: inline-block; }
.message-content-wrapper { display: flex; width: 100%; order: 2; }
.message-container.user .message-content-wrapper { justify-content: flex-end; padding-left: 36px; }
.message-container.bot .message-content-wrapper { justify-content: flex-start; padding-right: 36px; }
.role-name { font-size: 0.75rem; color: #b0b0b0; display: flex; align-items: center; flex-shrink: 0; gap: 0.3rem; }
.name-text { min-width: 0; }
.delete-btn { background: transparent; border: none; color: #aaa; font-size: 0.9rem; cursor: pointer; padding: 0 0.1rem; z-index: 1; flex-shrink: 0; line-height: 1; transition: color 0.2s; }
.delete-btn:hover { color: #f55; }
.message-bubble { padding: 0.5rem 0.8rem; border-radius: 0.8rem; max-width: fit-content; word-break: break-word; line-height: 1.4; position: relative; font-size: 0.9rem; white-space: pre-wrap; }
.message-container.bot .message-bubble { background-color: #3a4a4a; color: #ffffff; border-top-left-radius: 0.3rem; }
.message-container.user .message-bubble { background-color: #4a3a7a; color: #ffffff; border-top-right-radius: 0.3rem; }
.message-bubble strong,.message-bubble b{font-weight:bold;color:#f0f0f0;}.message-bubble em,.message-bubble i{font-style:italic;color:#cccccc!important;}.message-bubble blockquote{border-left:3px solid #5a5a5a;padding-left:.8rem;margin-left:.4rem;color:#b0b0b0;font-style:italic;}.message-bubble code{font-family:Consolas,Monaco,'Andale Mono','Ubuntu Mono',monospace;background-color:#2d2d2d;color:#e0e0e0;padding:.15em .3em;border-radius:3px;font-size:.85em;}.message-bubble pre{background-color:#2d2d2d;color:#e0e0e0;padding:.8rem;border-radius:6px;overflow-x:auto;margin:.4rem 0;font-size:.85em;}.message-bubble pre code{background-color:transparent;color:#e0e0e0;padding:0;border-radius:0;font-size:inherit;}.message-bubble table{border-collapse:collapse;margin:.8rem 0;width:auto;max-width:100%;overflow:hidden;display:block;word-break:normal;}.message-bubble th,.message-bubble td{border:1px solid #3a3a3a;padding:.4rem;text-align:left;}.message-bubble th{background-color:#282828;font-weight:bold;color:#f0f0f0;}.message-bubble tr:nth-child(even){background-color:#1f1f1f;}.message-bubble em:not(i),.message-bubble i:not(em){font-style:italic!important;color:#cccccc!important;}
.image-announcement{display:flex;flex-direction:column;align-items:center;margin:.5rem auto;max-width:60%;width:fit-content;position:relative;}.image-fade-container{border-radius:8px;overflow:hidden;position:relative;width:100%;}.chat-image{display:block;max-width:100%;height:auto;cursor:pointer;opacity:.95;transition:opacity .2s;}.chat-image:hover{opacity:1;}.image-error-text{color:#aaa;font-size:.85rem;padding:1rem;border:1px dashed #555;border-radius:8px;text-align:center;}.chat-image-delete-btn{position:absolute;top:5px;right:5px;background-color:rgba(0,0,0,.6);color:#fff;border:none;border-radius:50%;width:20px;height:20px;font-size:.7rem;line-height:20px;text-align:center;cursor:pointer;z-index:2;opacity:.7;transition:opacity .2s,background-color .2s;}.chat-image-delete-btn:hover{opacity:1;background-color:rgba(255,0,0,.7);}
#inputArea{display:flex;flex-direction:column;align-items:stretch;gap:.5rem;padding:.4rem .5rem;background-color:#1E1E1E;box-shadow:0 -8px 15px 0 rgba(30,30,30,.77);z-index:110;border:1px solid #2F2F2F;border-radius:12px;flex-shrink:0;position:relative;}
.input-textarea-container{flex:1;display:flex;}
.input-buttons-row{display:flex;align-items:center;width:100%;gap:.3rem;position:relative;}
#actionMenuButton{order:1;padding:.2rem .4rem;width:auto;height:auto;border-radius:0;background-color:transparent;color:#b0b0b0;border:none;font-size:1.4rem;cursor:pointer;flex-shrink:0;display:flex;justify-content:center;align-items:center;transition:color .2s ease;align-self:center;z-index:113;margin-right:.2rem;}#actionMenuButton:hover{color:#fff;background-color:transparent;}
#feedbackButton{order:2;background:0 0;border:none;color:#b0b0b0;font-size:1rem;font-weight:700;cursor:pointer;padding:.2rem .4rem;margin:0;line-height:1;flex-shrink:0;transition:color .2s ease;align-self:center;z-index:113;}#feedbackButton:hover{color:#fff;}#feedbackButton.active{color:#5080ff;}
.feedback-options-container{order:3;display:flex;align-items:center;gap:.4rem;overflow:hidden;transition:max-width .3s ease-out,opacity .3s ease-out,visibility .3s step-end;max-width:0;opacity:0;visibility:hidden;flex-shrink:0;z-index:113;}.feedback-options-container:not(.hidden){transition:max-width .3s ease-out,opacity .3s ease-out,visibility 0s;max-width:250px;opacity:1;visibility:visible;}.feedback-options-container .feedback-option{background-color:#3a3a3a;border:none;color:#ccc;font-size:.8rem;cursor:pointer;border-radius:15px;padding:.3rem .7rem;white-space:nowrap;transition:background-color .2s,color .2s;}.feedback-options-container .feedback-option:hover{background-color:#4a4a4a;color:#fff;}.feedback-options-container .feedback-option.active{background-color:#5080ff;color:#fff;font-weight:700;}
#userInput{order:4;flex-grow:1;min-height:calc(1.4em + .8rem + 2px);max-height:calc(2.8em + .8rem + 2px);padding:.4rem .8rem;line-height:1.4;font-size:.9rem;border-radius:1rem;border:none;background-color:#2a2a2a;color:#e0e0e0;resize:none;outline:0;box-sizing:border-box;transition:background-color .2s;overflow-y:hidden;scrollbar-width:none;-ms-overflow-style:none;z-index:111;}#userInput::-webkit-scrollbar{display:none;}#userInput:focus{background-color:#3a3a3a;box-shadow:none;}
#sendButton{order:5;margin-left:auto;width:28px;height:28px;border-radius:50%;background-color:#5080ff;color:#fff;font-size:.7rem;flex-shrink:0;border:none;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:background-color .2s ease;padding:0;align-self:center;z-index:113;}#sendButton:hover{background-color:#6699ff;}#sendButton:active{background-color:#3366cc;}#sendButton:disabled{background-color:#4a4a4a;color:#888;cursor:not-allowed;}
#loadingSpinner{position:absolute;bottom:.7rem;right:3rem;border:3px solid rgba(255,255,255,.3);border-top:3px solid #fff;border-radius:50%;width:16px;height:16px;animation:spin 1s linear infinite;display:none;z-index:112;}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
.initial-notice{text-align:center;margin:.1rem auto 1rem;color:#666;font-size:.85rem;padding:.8rem;max-width:80%;word-break:break-word;}.notice-divider{width:90%;height:1px;background-color:#3a3a3a;margin:.4rem auto 0;}
#imageOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.85);display:none;justify-content:center;align-items:center;z-index:300;cursor:pointer;}#imageOverlay img{max-width:90%;max-height:90%;object-fit:contain;border-radius:6px;}
#menuOverlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.3);z-index:100;display:none;cursor:default;}
#actionMenu{position:absolute;bottom:calc(100% + 5px);left:.5rem;width:120px;max-width:150px;background-color:#2a2a2a;border:1px solid #444;border-radius:10px;padding:.3rem 0;box-sizing:border-box;z-index:101;display:flex;flex-direction:column;align-items:stretch;opacity:0;visibility:hidden;transition:opacity .2s ease-out,visibility .2s ease-out,transform .2s ease-out;transform:translateY(10px);box-shadow:0 4px 10px rgba(0,0,0,.4);}#actionMenu.visible{opacity:1;visibility:visible;transform:translateY(0);}#actionMenu::after{content:"";position:absolute;top:100%;left:12px;width:0;height:0;border-top:8px solid #2a2a2a;border-left:8px solid transparent;border-right:8px solid transparent;z-index:102;}#actionMenu::before{content:"";position:absolute;top:calc(100% - 1px);left:10px;width:0;height:0;border-top:10px solid #444;border-left:10px solid transparent;border-right:10px solid transparent;z-index:101;}.menu-buttons{display:flex;flex-direction:column;gap:0;width:100%;position:relative;}#actionMenu button{width:100%;padding:.5rem .8rem;border:none;border-radius:0;background-color:transparent;color:#ccc;font-size:.85rem;cursor:pointer;transition:background-color .2s ease,color .2s ease;text-align:left;z-index:103;display:flex;align-items:center;gap:.5rem;}#actionMenu button i{width:1em;text-align:center;color:#999;transition:color .2s;}#actionMenu button:hover{background-color:#3a3a3a;color:#fff;}#actionMenu button:hover i{color:#ccc;}
.accordion{display:flex;flex-direction:column;gap:.1rem;margin-left:0;margin-top:.2rem;background-color:#2a2a2a;border:1px solid #444;border-radius:8px;padding:.2rem 0;box-shadow:0 2px 5px rgba(0,0,0,.3);z-index:102;width:100%;}.accordion.hidden{display:none;}#situationOptions{background-color:#383838;border-color:#555;margin-top:.1rem;}.accordion button.option{background-color:transparent;border:none;cursor:pointer;font-size:.8rem;color:#bbb;padding:.4rem .8rem;text-align:center;width:100%;box-sizing:border-box;transition:color .2s,background-color .2s;display:flex;justify-content:center;align-items:center;}.accordion button.option:hover{color:#fff;background-color:#4a4a4a;}
.modal-overlay{position:fixed!important;top:0;left:0;width:100vw;height:100vh;background-color:rgba(0,0,0,.75);backdrop-filter:blur(3px);-webkit-backdrop-filter:blur(3px);display:none;justify-content:center;align-items:center;padding:1.5rem;overflow:hidden;z-index:200;box-sizing:border-box;}#settingsModalOverlay{display:none;}
.modal-content{position:relative;background-color:#242424;color:#e0e0e0;padding:1.2rem;border-radius:10px;box-shadow:0 8px 20px rgba(0,0,0,.6);width:100%;max-width:520px;max-height:85vh;overflow-y:auto;-ms-overflow-style:none;scrollbar-width:none;z-index:201;}.modal-content::-webkit-scrollbar{display:none;}.modal-header{padding:0 0 .8rem;background-color:transparent;text-align:center;font-size:1.1rem;font-weight:700;color:#fff;border-bottom:1px solid #444;margin-bottom:1rem;position:relative;}.modal-header h2{margin:0;font-size:1.1rem;}#closeModalButton{all:unset;position:absolute;top:-.2rem;right:0;cursor:pointer;font-size:1.4rem;color:#aaa;background-color:transparent;transition:color .2s;padding:.2rem;line-height:1;z-index:202;}#closeModalButton:hover{color:#fff;}.modal-body{flex-grow:1;display:flex;flex-direction:column;gap:1.2rem;}.modal-footer{border-top:1px solid #444;padding-top:1rem;margin-top:1rem;display:flex;justify-content:flex-end;}.modal-footer .save-button{padding:.5rem 1rem;border:none;border-radius:4px;background-color:#5080ff;color:#fff;font-size:.9rem;font-weight:400;cursor:pointer;transition:background-color .2s ease;}.modal-footer .save-button:hover{background-color:#6699ff;}.setting-slots-modal{padding-bottom:.8rem;border-bottom:1px solid #444;}.slot-buttons-container-modal{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center;}.slot-button{width:32px;height:32px;border-radius:50%;background-color:#5a5a5a;color:#fff;border:none;font-size:.9rem;cursor:pointer;display:flex;justify-content:center;align-items:center;transition:background-color .2s ease,transform .1s ease;flex-shrink:0;}.slot-button:hover{background-color:#6a6a6a;}.slot-button.active{background-color:#5080ff;transform:scale(1.05);box-shadow:0 0 8px rgba(80,128,255,.5);}.slot-button:active{background-color:#3366cc;transform:scale(.98);}
.resume-layout-container{display:flex;flex-direction:column;gap:1.5rem;}.character-info-section h3,.user-info-section h3{margin-top:0;margin-bottom:.8rem;font-size:1rem;color:#fff;border-bottom:1px dotted #444;padding-bottom:.4rem;}.info-grid{display:grid;grid-template-columns:160px 1fr;gap:.8rem 1rem;}@media (max-width:600px){.info-grid{grid-template-columns:1fr;gap:.8rem;}}.info-item{display:flex;flex-direction:column;gap:.4rem;}.info-grid .info-item:has(#botImagePreview),.info-grid .info-item:has(#userImagePreview){grid-column:1/2;grid-row:1/3;align-self:start;}.info-grid .info-item:has(#botNameInputModal),.info-grid .info-item:has(#userNameInputModal){grid-column:2/3;grid-row:1/2;}.info-grid .info-item:has(#botPersonaInputModal){grid-column:2/3;grid-row:2/3;}.user-info-section>label[for=userGuidelinesInputModal],.user-info-section>textarea#userGuidelinesInputModal{grid-column:1/-1;margin-top:.5rem;}.user-info-section>label[for=userGuidelinesInputModal]{margin-bottom:.1rem;}@media (max-width:600px){.info-grid .info-item:has(#botImagePreview),.info-grid .info-item:has(#userImagePreview){grid-column:1/-1;grid-row:auto;align-items:center;margin-bottom:.5rem;}.info-grid .info-item:has(#botNameInputModal),.info-grid .info-item:has(#userNameInputModal){grid-column:1/-1;grid-row:auto;}.info-grid .info-item:has(#botPersonaInputModal){grid-column:1/-1;grid-row:auto;}}.half-width-row{display:flex;gap:.8rem;}.half-width-item{flex:1;display:flex;flex-direction:column;gap:.4rem;}.modal-body label{display:block;margin-bottom:.1rem;font-weight:400;color:#b0b0b0;font-size:.85rem;}.modal-body input[type=text],.modal-body textarea{width:100%;padding:.5rem;border:none;border-radius:6px;background-color:#3a3a3a;color:#e0e0e0;font-size:.9rem;margin-bottom:0;box-sizing:border-box;resize:vertical;scrollbar-width:none;-ms-overflow-style:none;transition:background-color .2s;}.modal-body input[type=text]::-webkit-scrollbar,.modal-body textarea::-webkit-scrollbar{display:none;}.modal-body textarea{line-height:1.4;min-height:60px;}#botPersonaInputModal,#userGuidelinesInputModal{min-height:100px;}.modal-body input[type=text]:focus,.modal-body textarea:focus{outline:0;background-color:#4a4a4a;box-shadow:0 0 0 2px rgba(80,128,255,.5);}
.image-preview-area{width:160px;height:220px;border:1px dashed #5a5a5a;border-radius:8px;display:flex;justify-content:center;align-items:center;background-color:#2d2d2d;flex-shrink:0;overflow:hidden;margin-top:0;cursor:pointer;transition:border-color .2s;position:relative;}.image-preview-area:hover{border-color:#777;}.image-preview-area img{width:100%;height:100%;object-fit:cover;display:block;}.image-preview-area::before{content:"Click to add URL";color:#888;font-size:.8rem;text-align:center;position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:#2d2d2d;opacity:1;pointer-events:none;transition:opacity .2s;}.image-preview-area.has-image::before{opacity:0;}
#generateRandomCharacter,#generateRandomUser{font-size:1rem;background:0 0;border:none;padding:0 .4rem;margin:0;cursor:pointer;color:#bbb;transition:color .2s,transform .1s;line-height:1;flex-shrink:0;}#generateRandomCharacter:hover,#generateRandomUser:hover{color:#fff;transform:scale(1.1);}#generateRandomCharacter:active,#generateRandomUser:active{transform:scale(.95);}#generateRandomCharacter:disabled,#generateRandomUser:disabled{cursor:wait;color:#888;}
/* --- Modal Animations (복구) --- */
@keyframes fadeIn{from{opacity:0;transform:scale(.98)}to{opacity:1;transform:scale(1)}}@keyframes fadeOut{from{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.98)}}.modal-overlay.modal-fade-in{animation:fadeIn .3s cubic-bezier(.25,.46,.45,.94) forwards;}.modal-overlay.modal-fade-out{animation:fadeOut .3s cubic-bezier(.25,.46,.45,.94) forwards;}
